
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Making your package available on conda-forge &#8212; Open Image Data Handbook</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="How-tos introduction" href="how_tos_introduction.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Open Image Data Handbook</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Welcome to the Open Image Data Handbook
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../tutorials/tutorials_intro.html">
   Tutorials introduction
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../tutorials/em/em_tutorial_intro.html">
   EM analysis tutorial
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorials/em/em_installation.html">
     Setting up your python environment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorials/em/notebook_setup.html">
     Downloading and launching the notebooks
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Explanations
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../explanations/explanations_intro.html">
   Explanations introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../explanations/open_research_data/open_research_data_intro.html">
   Open Research Data
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  How-tos
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="how_tos_introduction.html">
   How-tos introduction
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Making your package available on conda-forge
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/kevinyamauchi/Open Image Data Handbook"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/kevinyamauchi/Open Image Data Handbook/issues/new?title=Issue%20on%20page%20%2Fhow_tos/conda_forge_packaging.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/how_tos/conda_forge_packaging.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#instructions">
   Instructions
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Making your package available on conda-forge</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#instructions">
   Instructions
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="making-your-package-available-on-conda-forge">
<h1>Making your package available on conda-forge<a class="headerlink" href="#making-your-package-available-on-conda-forge" title="Permalink to this headline">#</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">#</a></h2>
<p>This how-to teaches how to make your pypi installable with conda via <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code>.</p>
<p><strong>Prerequisites</strong></p>
<ul class="simple">
<li><p>You have a package available on pypi that you want to make available on</p></li>
<li><p>You have a github account</p></li>
<li><p>You know how to clone and push repositories with git</p></li>
<li><p>You have conda installed on your computer</p></li>
</ul>
<p><strong>Related reading</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://conda-forge.org/docs/maintainer/adding_pkgs.html">conda-forge contributing packages docs</a></p></li>
<li><p><a class="reference external" href="https://conda-forge.org/blog/posts/2020-03-05-grayskull/">Blog post on grayskull</a></p></li>
</ul>
</section>
<section id="instructions">
<h2>Instructions<a class="headerlink" href="#instructions" title="Permalink to this headline">#</a></h2>
<ol>
<li><p>Fork the conda-forge <code class="docutils literal notranslate"><span class="pre">staged-recipes</span></code> library. Forking is the process of making a copy of a repository in your own account. We will make our new recipe to build our package on conda in this repository. We fork the repository instead of making the changes directly on the official <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> recipe to avoid cluttering the official repository.</p>
<ol class="simple">
<li><p>Log into your github account.</p></li>
<li><p>Navigate your web browser to the <a class="reference external" href="https://github.com/conda-forge/staged-recipes"><code class="docutils literal notranslate"><span class="pre">staged-recipes</span></code> repository</a>.</p></li>
<li><p>Click the “fork” button to begin the forking process.</p></li>
</ol>
<a class="reference internal image-reference" href="../_images/fork_staged_recipes.png"><img alt="fork the staged-recipes repository" class="align-center" src="../_images/fork_staged_recipes.png" style="width: 600px;" /></a>
<ol>
<li><p>Click the green “Create fork” button to confirm your fork.</p>
<a class="reference internal image-reference" href="../_images/confirm_fork.png"><img alt="confirm fork creation" class="align-center" src="../_images/confirm_fork.png" style="width: 600px;" /></a>
</li>
<li><p>When the fork is completed, you will be taken to your fork. Note that the repository is now in your github account and it says it is “forked from <code class="docutils literal notranslate"><span class="pre">conda-forge/staged-recipes</span></code>”.</p>
<a class="reference internal image-reference" href="../_images/fork_completed.png"><img alt="confirm fork creation" class="align-center" src="../_images/fork_completed.png" style="width: 600px;" /></a>
</li>
</ol>
</li>
<li><p>Clone your fork of the <code class="docutils literal notranslate"><span class="pre">staged-recipes</span></code> to your computer. Click the green “Code” button on the repository and copy the <code class="docutils literal notranslate"><span class="pre">git&#64;...</span></code> address. Then use the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> command to clone the repository to the directory of your choosing.</p>
<a class="reference internal image-reference" href="../_images/clone_repo_link.png"><img alt="confirm fork creation" class="align-center" src="../_images/clone_repo_link.png" style="width: 600px;" /></a>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone &lt;repo git address&gt;
</pre></div>
</div>
</li>
<li><p>Create a conda environment to install <code class="docutils literal notranslate"><span class="pre">grayskull</span></code>, the utility for generating your conda build recipe. In your terminal, create a new environment called “grayskull”</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda create -n grayskull
</pre></div>
</div>
</li>
<li><p>After the environment creation finishes, activate your new “grayskull” environment.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda activate grayskull
</pre></div>
</div>
</li>
<li><p>Install <code class="docutils literal notranslate"><span class="pre">grayskull</span></code> from the <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> channel.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install -c conda-forge grayskull
</pre></div>
</div>
</li>
<li><p>Navigate to the <code class="docutils literal notranslate"><span class="pre">recipes</span></code> directory of your <code class="docutils literal notranslate"><span class="pre">staged-recipes</span></code> fork that you cloned.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> path/to/staged-recipes/recipes
</pre></div>
</div>
</li>
<li><p>Use grayskull to generate the recipe from your pypi python  package. Enter the command below in your terminal, replacing <code class="docutils literal notranslate"><span class="pre">&lt;pypi</span> <span class="pre">package</span> <span class="pre">name&gt;</span></code> with the name of your package (i.e., the name you use when you do <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">&lt;pypi</span> <span class="pre">package</span> <span class="pre">name&gt;</span></code>).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span> grayskull pypi --strict-conda-forge &lt;pypi package name&gt;
</pre></div>
</div>
</li>
<li><p>Upon completion, a folder with the name of your package will be generated. Within that folder, there will be a <code class="docutils literal notranslate"><span class="pre">meta.yaml</span></code> file containing your conda recipe. For more information on the <code class="docutils literal notranslate"><span class="pre">meta.yaml</span></code> file, see the <a class="reference external" href="https://docs.conda.io/projects/conda-build/en/latest/resources/define-metadata.html"><code class="docutils literal notranslate"><span class="pre">conda-build</span></code> docs</a>. As an example, see the <code class="docutils literal notranslate"><span class="pre">meta.yaml</span></code> from <a class="reference external" href="https://github.com/napari-threedee/napari-threedee">napari-threedee</a> below</p>
<div class="toggle docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{% set name = &quot;napari-threedee&quot; %}
{% set version = &quot;0.0.1&quot; %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/napari-threedee-{{ version }}.tar.gz
  sha256: 7b468a891d5581f3c2446cfd05a58d62812e817aaa2b01b73f242449126ea5fd

build:
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv
  number: 0

requirements:
  host:
    - python &gt;=3.8
    - setuptools-scm
    - pip
  run:
    - python &gt;=3.8
    - npe2
    - napari
    - numpy
    - qtpy

test:
  imports:
    - napari_threedee
  commands:
    - pip check
  requires:
    - pip

about:
  home: https://github.com/alisterburt/napari-threedee
  summary: A suite of useful tools based on 3D interactivity in napari
  license: BSD-3-Clause
  license_file: LICENSE

extra:
  recipe-maintainers:
    - kevinyamauchi
    - alisterburt
</pre></div>
</div>
</div>
</li>
<li><p>If you are satisfied with the recipe (generally this works for packages with out complicated-to-install dependencies (e.g., pytorch), you can now commit the change. The instructions below are assuming the package name is <code class="docutils literal notranslate"><span class="pre">napari-threedee</span></code>. Replace <code class="docutils literal notranslate"><span class="pre">napari-threedee</span></code> with the name of your package.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a new branch</span>
git checkout -b add-napari-threedee

<span class="c1"># add the meta.yaml file</span>
git add napari-threedee/meta.yaml

<span class="c1"># commit the new file</span>
git commit -m <span class="s2">&quot;add the recipe for napari-threedee&quot;</span>

<span class="c1"># push the changes (change add-napari-threedee to your branch name)</span>
git push --set-upstream origin add-napari-threedee
</pre></div>
</div>
</li>
<li><p>Now you will create a pull request on the conda-forge/staged-recipes repo so that your new recipe can be reviewed. Navigate to the <a class="reference external" href="https://github.com/conda-forge/staged-recipes"><code class="docutils literal notranslate"><span class="pre">conda-forge/staged-recipes</span></code></a> repo with your web browser. Since you just pushed a new branch to your fork, you should see a button to open a new pull request. Open the pull request once you have read the instructions in the template.</p></li>
<li><p>The pull request will perform automatic tests. You can view them at the bottom of your pull request (screenshot below). Once they have all passed (all green checkmarks), you can request review from the team by making a comment on your pull request with the following message: <code class="docutils literal notranslate"><span class="pre">This</span> <span class="pre">is</span> <span class="pre">ready</span> <span class="pre">for</span> <span class="pre">review</span> <span class="pre">&#64;conda-forge-admin,</span> <span class="pre">please</span> <span class="pre">ping</span> <span class="pre">team</span></code></p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> team will then review your new recipe. Once they approve, you are done! Congratulations!</p></li>
</ol>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./how_tos"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="how_tos_introduction.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">How-tos introduction</p>
        </div>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Kevin Yamauchi<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>